# NFR.md — Таблица требований безопасности

| ID     | Название | Описание | Метрика/Порог | Проверка (чем/где) | Компонент | Приоритет |
|--------|----------|----------|---------------|--------------------|-----------|-----------|
| NFR-01 | Безопасность аутентификации | Хэширование паролей с использованием bcrypt | cost factor >= 12 | Unit-тесты конфигурации + код-ревью | auth | High |
| NFR-02 | Защита от перебора паролей | Ограничение попыток входа с одного IP | max 5 попыток/минуту | Интеграционные тесты + мониторинг | auth | High |
| NFR-03 | Валидация входных данных | Проверка длины и формата полей записи | title <= 255 chars, link - валидный URL | Pytest + FastAPI validation tests | api | High |
| NFR-04 | Строгая типизация полей | Только допустимые значения kind и status | kind в ["book", "article"], status в ["planned", "reading", "completed"] | Unit-тесты валидации | api | High |
| NFR-05 | Изоляция данных пользователей | Пользователь видит только свои записи | 0% успешных запросов к чужим данным | E2E тесты авторизации | api | High |
| NFR-06 | Производительность GET /entries | Время ответа для чтения списка | p95 <= 200ms при 20 RPS | Нагрузочный тест | api | Medium |
| NFR-07 | Надежность создания записей | Успешность операций создания | Success Rate >= 99.5% для POST /entries | Мониторинг + E2E тесты | api | Medium |
| NFR-08 | Безопасность зависимостей | Отсутствие критических уязвимостей | 0 High/Critical уязвимостей в зависимостях | CI/CD: safety/trivy сканирование | build | High |
| NFR-09 | Защита конфиденциальных данных | Исключение чувствительных данных из логов | Токены/пароли не логируются | Code review + тесты логгирования | logging | Medium |
| NFR-10 | Срок жизни JWT токена | Ограниченное время жизни токена | TTL <= 15 минут | Конфигурация + unit-тесты | auth | Medium |
| NFR-11 | Доступность API | Общая доступность сервиса | SLA >= 99.9% uptime | Мониторинг (uptime checks) | platform | Medium |
| NFR-12 | Время ответа эндпоинтов | Базовое время ответа ключевых эндпоинтов | p95 <= 500ms для всех эндпоинтов | Нагрузочное тестирование | api | Medium |
